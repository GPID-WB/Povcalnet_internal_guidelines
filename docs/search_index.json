[["create-pcb-files.html", "Chapter 10 Create .PCB files 10.1 The povcalnet_update repository", " Chapter 10 Create .PCB files As explained in the introduction of this part of the book, creating the .PCB files are the last step of the process before uploading everything to the PovcalNet system. The .PCB files are (TO-DO: Ask Tony to provide his inputs for the explanations.) 10.1 The povcalnet_update repository Once you have updated all the sheets in the master filebesides the surveymean sheetand have updated the microdata in the P drive, the next step is to create the .pcb files and update the surveymean sheet. All of this is done with the PovcalNet-Team/povcalnet_update repository. Make sure you clone the repo and open it as a project in Rstudio. You will find the project has three .R files only. If everything goes as expected, youll only need to use the file 00.master.R. In rare cases, you will need to modify the functions in other two files. The utils.R file has generic functions such as loading the master file into the system, or creating survey IDs. These functions are used all along the process. The process_functions.R file contain functions for specific parts of the projects are executed usually once along the whole process. Basically, the 00.master.R calls these functions in order in the same way that a master do-file call other do-files that do specific things. In this chapter, we break down the 00.master.R file, so you understand how to run it, the logic behind, and what to do in case it needs to be fixed. Lets start by installing the minimum necessary packages. 00.master.R file assumes you already have them installed, so you should run the code below before you start. # pkg_load &lt;- knitr::combine_words(pkgs, before = &quot;`&quot;) pkgs &lt;- c(&quot;janitor&quot;, &quot;data.table&quot;, &quot;tidyverse&quot;, &quot;writexl&quot;, &quot;readxl&quot;, &quot;here&quot;) no_installed &lt;- pkgs[!(pkgs %in% installed.packages())] installed.packages(no_installed) 10.1.1 Directories The first section includes the directories in which youre going to be working. As of today (2020-11-20), the datadir directory is for 2020_JUL as it was the last release of PovcalNet. However, make sure you create a new folder with the year and month of the tentative release. 10.1.2 Surveys that have changed Now, we have to specify what countries/years have been added or changed to the PovcalNet repository. We recommend you do this country by country. #--------- to modify in each round --------- countries &lt;- &quot;CHN&quot; years &lt;- NULL If you leave the argument years equal to NULL, the code will update all the years for the country select. In this case, CHN. However, you could specify what years to update for that particular country, like, countries &lt;- &quot;IND&quot; years &lt;- c(1993, 2004, 2009, 2012) It is important to note that unless you want to update all the years available in more than one country, you should not include in the countries variable more than one country. "]]
