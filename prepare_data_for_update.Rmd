# (PART) Povcalnet Update {-}

# Prepare data for PovcalNet update {#prepare}

In this section we briefly describe what needs to be done with each auxiliary file to update PovcalNet

## Population

### Raw data
Everything related population data should be placed in the folder `p:/01.PovcalNet/03.QA/03.Population`, hereafter (`./`).

Population data is saved in the folder `./data`. The data is may come from two different sources, WDI or from an internal source in DECDG. Right now, the data is build and shared by `Emi Suzuki <esuzuki1@worldbank.org>` in an Excel file. 

The file shared by Emi should be placed without modification in the folder `./data/original`. Then, the file is copied again into the folder `./data` with the name `population_country_yyyy-mm-dd.xlsx` where `yyyy-mm-dd` refers to the official release date of the population data. 


### update master file

Once the new raw population data is in the folder `./data` it is necessary to update the `population` sheet in the master file. This can be done by just type, 

```{stata, eval = FALSE}
pcn master, update(population)
```

Finally, you can check the differences between the two versions by using the following code, 

```{stata, eval = FALSE}
pcn master, load(Population) 
rename population pop2

tempfile pop2
save `pop2'

// the version to compare with must change depending on the vintage available
pcn master, load(Population) version(20200529073145) 
rename population pop1

merge 1:1 countrycode coveragetype year using `pop2'

tab year if _merge == 2

tab countryname if _merge == 2 & year < 2019

gen diffpop = pop1 - pop2
sum diffpop
br if abs(diffpop) > `r(mean)'*2*`r(sd)' & diffpop != .

```

## GDP and Consumption

blah blah

## PPP

blah blah

## CPI 

blah blah



## National accounts for "special countries"

1.Get the latest national accounts file from **P:/01.PovcalNet/03.QA/04.NationalAccounts/data**.

2.Get the relevant data from the latest versions of the [World Development Indicators](https://databank.worldbank.org/source/world-development-indicators) (WDI) and [World Economic Outlook](https://www.imf.org/en/Publications/SPROLLs/world-economic-outlook-databases#sort=%40imfdate%20descending) (WEO).  

The WDI series for PCE is NE.CON.PRVT.PC.KD and the WDI series for GDP is **NY.GDP.PCAP.KD**. The WEO series for GDP is **NGDPRPC**. If **NGDPRPC** is not available, use the growth rate provided in **NGDPRPPPPCPCH** to splice on the series.   

Below you will find the descriptions of the series. (If the series change in future versions, you can choose related series with advice from R.Andrés Castañeda or Christoph Lakner.)

- *NE.CON.PRVT.PC.KD*: Household final consumption expenditure per capita (constant 2010 US$). 

- *NY.GDP.PCAP.KD*: GDP per capita is gross domestic product divided by midyear population. Data are in constant 2010 U.S. dollars.

- *NGDPRPC*: Gross domestic product per capita, constant prices. GDP is expressed in constant national currency per person. Data are derived by dividing constant price GDP by total population.*

- *NGDPRPPPPCPCH*: Gross domestic product per capita, constant prices (purchasing power parity; percent change). Data are derived by dividing constant price purchasing-power parity (PPP) GDP by total population.

3.Update the non-missing observations in the PCE and GDP series. Make sure there is no observation where both PCE and GDP are missing.  

4.In the Excel file for the national accounts, you will find the source of data and clues on how best to update each observation. Unless otherwise instructed by R.Andrés Castañeda or Christoph Lakner, use the source in the latest version of the national accounts to update the relevant observations.  

5.For India, update the latest Excel file with pass-through calculations, which can be found at **P:/01.PovcalNet/03.QA/04.NationalAccounts/data/_aux**. Follow instructions in the Excel file and Daniel Mahler to update rural and urban PCE. 

